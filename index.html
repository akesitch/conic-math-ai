<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Conic AI Test</title>
    <script src="https://www.desmos.com/api/v1.9/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-10 bg-gray-50">
    <div class="max-w-4xl mx-auto bg-white p-5 rounded-xl shadow-lg">
        <h1 class="text-2xl font-bold mb-4">ทดสอบวาดกราฟภาคตัดกรวย</h1>
        
        <div class="flex gap-2 mb-4">
            <input type="text" id="eqInput" placeholder="พิมพ์เช่น x^2 + y^2 = 16" 
                class="flex-1 p-2 border rounded shadow-sm focus:ring-2 focus:ring-blue-500">
            <button onclick="updateGraph()" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">วาดกราฟ</button>
        </div>

        <div id="calculator" style="width: 100%; height: 400px;" class="border rounded"></div>
    </div>

    <script>
        // สร้างเครื่องคิดเลขรอไว้
        const elt = document.getElementById('calculator');
        const calculator = Desmos.GraphingCalculator(elt, {keypad: false});

        function updateGraph() {
            const inputElement = document.getElementById('eqInput');
            const equation = inputElement.value;

            if (equation.trim() !== "") {
                // ล้างค่าเก่า (id เดียวกันจะถูกเขียนทับ)
                calculator.setExpression({ 
                    id: 'graph1', 
                    latex: equation,
                    color: Desmos.Colors.BLUE 
                });
            } else {
                alert("กรุณาใส่สมการก่อนครับ");
            }
        }
    </script>
</body>
</html>

